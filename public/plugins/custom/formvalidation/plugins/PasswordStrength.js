!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self).FormValidation=e.FormValidation||{},e.FormValidation.plugins=e.FormValidation.plugins||{},e.FormValidation.plugins.PasswordStrength=t())}(this,function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e){return(t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var r=FormValidation.Plugin,o=function(o){function n(e){var a,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=this,(a=!(o=t(n).call(this,e))||"object"!=typeof o&&"function"!=typeof o?i(r):o).opts=Object.assign({},{minimalScore:3,onValidated:function(){}},e),a.validatePassword=a.checkPasswordStrength.bind(i(a)),a.validatorValidatedHandler=a.onValidatorValidated.bind(i(a)),a}var l,s,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,r),l=n,(s=[{key:"install",value:function(){var e,t,a;this.core.registerValidator(n.PASSWORD_STRENGTH_VALIDATOR,this.validatePassword),this.core.on("core.validator.validated",this.validatorValidatedHandler),this.core.addField(this.opts.field,{validators:(e={},t=n.PASSWORD_STRENGTH_VALIDATOR,a={message:this.opts.message,minimalScore:this.opts.minimalScore},t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e)})}},{key:"uninstall",value:function(){this.core.off("core.validator.validated",this.validatorValidatedHandler),this.core.disableValidator(this.opts.field,n.PASSWORD_STRENGTH_VALIDATOR)}},{key:"checkPasswordStrength",value:function(){var e=this;return{validate:function(t){var a=t.value;if(""===a)return{valid:!0};var i=zxcvbn(a),r=i.score,o=i.feedback.warning||"The password is weak";return r<e.opts.minimalScore?{message:o,meta:{message:o,score:r},valid:!1}:{meta:{message:o,score:r},valid:!0}}}}},{key:"onValidatorValidated",value:function(e){if(e.field===this.opts.field&&e.validator===n.PASSWORD_STRENGTH_VALIDATOR&&e.result.meta){var t=e.result.meta.message,a=e.result.meta.score;this.opts.onValidated(e.result.valid,t,a)}}}])&&e(l.prototype,s),d&&e(l,d),n}();return o.PASSWORD_STRENGTH_VALIDATOR="___PasswordStrengthValidator",o});
